import { Point, Tool } from '../types';
import { PencilCursor } from './icons/PencilCursor';
import { CommentCursor } from './icons/CommentCursor';

interface CustomCursorProps {
  cursorPos: Point | null;
  isPanning: boolean;
  tool: Tool;
  asciiStroke: boolean;
  strokeColor: string;
}

export function CustomCursor({
  cursorPos,
  isPanning,
  tool,
  asciiStroke,
  strokeColor,
}: CustomCursorProps) {
  if (!cursorPos || isPanning) return null;

  return (
    <div
      className="draw-cursor"
      style={{
        left: cursorPos.x,
        top: cursorPos.y,
        transform: 'translate(-2px, -2px)',
      }}
    >
      {tool === 'draw' && !asciiStroke && (
        <PencilCursor color={strokeColor} />
      )}
      {tool === 'draw' && asciiStroke && (
        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" style={{ transform: 'translate(-5px, -5px)' }}>
          <g clipPath="url(#clip0_ascii)">
            <g filter="url(#filter0_d_ascii)">
              <path d="M25.9873 18.5616C26.128 18.7022 26.207 18.893 26.207 19.0919C26.207 19.2908 26.128 19.4816 25.9873 19.6222L24.9267 20.6829C24.515 21.0945 24.0132 21.4047 23.4609 21.5888C22.9086 21.7729 22.321 21.8259 21.7447 21.7435C21.827 22.3199 21.774 22.9074 21.5899 23.4597C21.4058 24.012 21.0957 24.5139 20.684 24.9255L19.6234 25.9862C19.4827 26.1268 19.292 26.2058 19.093 26.2058C18.8941 26.2058 18.7034 26.1268 18.5627 25.9862C18.4221 25.8455 18.343 25.6548 18.343 25.4558C18.343 25.2569 18.4221 25.0662 18.5627 24.9255L19.6234 23.8649C20.0453 23.4429 20.2824 22.8706 20.2824 22.2739C20.2824 21.6771 20.0453 21.1048 19.6234 20.6829L16.9717 18.0312L15.9111 19.0919C15.7704 19.2325 15.5796 19.3116 15.3807 19.3116C15.1818 19.3116 14.9911 19.2325 14.8504 19.0919C14.7098 18.9512 14.6307 18.7605 14.6307 18.5616C14.6307 18.3626 14.7098 18.1719 14.8504 18.0312L15.9111 16.9706L13.2594 14.3189C12.8375 13.897 12.2652 13.6599 11.6684 13.6599C11.0717 13.6599 10.4994 13.897 10.0774 14.3189L9.01677 15.3796C8.87612 15.5202 8.68535 15.5992 8.48644 15.5992C8.28753 15.5992 8.09676 15.5202 7.95611 15.3796C7.81546 15.2389 7.73644 15.0482 7.73644 14.8492C7.73644 14.6503 7.81546 14.4596 7.95611 14.3189L9.01677 13.2583C9.42843 12.8466 9.93027 12.5364 10.4826 12.3523C11.0349 12.1682 11.6224 12.1153 12.1988 12.1976C12.1164 11.6213 12.1694 11.0337 12.3535 10.4814C12.5376 9.92911 12.8478 9.42727 13.2594 9.01561L14.3201 7.95495C14.4607 7.8143 14.6515 7.73528 14.8504 7.73528C15.0493 7.73528 15.2401 7.8143 15.3807 7.95495C15.5214 8.0956 15.6004 8.28637 15.6004 8.48528C15.6004 8.68419 15.5214 8.87496 15.3807 9.01561L14.3201 10.0763C13.8981 10.4982 13.6611 11.0705 13.6611 11.6673C13.6611 12.264 13.8981 12.8363 14.3201 13.2583L16.9717 15.9099L18.0324 14.8492C18.173 14.7086 18.3638 14.6296 18.5627 14.6296C18.7616 14.6296 18.9524 14.7086 19.093 14.8492C19.2337 14.9899 19.3127 15.1807 19.3127 15.3796C19.3127 15.5785 19.2337 15.7693 19.093 15.9099L18.0324 16.9706L20.684 19.6222C21.106 20.0442 21.6783 20.2812 22.275 20.2812C22.8718 20.2812 23.4441 20.0442 23.866 19.6222L24.9267 18.5616C25.0673 18.4209 25.2581 18.3419 25.457 18.3419C25.6559 18.3419 25.8467 18.4209 25.9873 18.5616Z" fill="black"/>
              <path d="M8.66322 12.9047L8.84276 12.7348C9.27259 12.3523 9.77647 12.0604 10.324 11.8779C10.7566 11.7337 11.2088 11.6617 11.6622 11.661C11.6629 11.2076 11.7348 10.7554 11.879 10.3228C12.0877 9.69702 12.4394 9.1285 12.9059 8.66206L13.9665 7.6014C14.2009 7.36698 14.5189 7.23542 14.8504 7.23542C15.1819 7.23542 15.4999 7.36698 15.7343 7.6014C15.9687 7.83582 16.1003 8.15376 16.1003 8.48528C16.1003 8.8168 15.9687 9.13475 15.7343 9.36917L14.6736 10.4298C14.3454 10.758 14.1612 11.2031 14.1612 11.6673C14.1612 12.1314 14.3454 12.5765 14.6736 12.9047L16.9717 15.2028L17.6788 14.4957C17.9132 14.2613 18.2312 14.1297 18.5627 14.1297C18.8942 14.1297 19.2122 14.2613 19.4466 14.4957C19.681 14.7301 19.8126 15.0481 19.8126 15.3796C19.8126 15.7111 19.681 16.029 19.4466 16.2635L18.7395 16.9706L21.0376 19.2687L21.166 19.3847C21.4774 19.6399 21.8689 19.781 22.275 19.781C22.7392 19.781 23.1843 19.5968 23.5125 19.2687L24.5731 18.208C24.8075 17.9736 25.1255 17.842 25.457 17.842C25.7885 17.842 26.1065 17.9736 26.3409 18.208C26.5753 18.4424 26.7069 18.7604 26.7069 19.0919C26.7069 19.4234 26.5753 19.7413 26.3409 19.9758L25.2802 21.0364C24.8138 21.5029 24.2453 21.8546 23.6195 22.0633C23.1867 22.2075 22.7342 22.2788 22.2805 22.2794C22.28 22.733 22.2087 23.1855 22.0644 23.6183C21.8557 24.2441 21.504 24.8126 21.0376 25.2791L19.9769 26.3397C19.7425 26.5741 19.4246 26.7057 19.093 26.7057C18.7615 26.7057 18.4436 26.5741 18.2092 26.3397C17.9747 26.1053 17.8432 25.7874 17.8432 25.4558C17.8432 25.1243 17.9747 24.8064 18.2092 24.572L19.2698 23.5113L19.3858 23.3829C19.641 23.0714 19.7822 22.68 19.7822 22.2739C19.7822 21.8097 19.598 21.3646 19.2698 21.0364L16.9717 18.7383L16.2646 19.4454C16.0302 19.6799 15.7123 19.8114 15.3807 19.8114C15.0492 19.8114 14.7313 19.6799 14.4968 19.4454C14.2624 19.211 14.1309 18.8931 14.1309 18.5616C14.1309 18.23 14.2624 17.9121 14.4968 17.6777L15.204 16.9706L12.9059 14.6725C12.5777 14.3443 12.1326 14.1601 11.6684 14.1601C11.2043 14.1601 10.7592 14.3443 10.431 14.6725L9.37032 15.7331C9.1359 15.9675 8.81796 16.0991 8.48644 16.0991C8.15492 16.0991 7.83698 15.9675 7.60256 15.7331C7.36814 15.4987 7.23657 15.1808 7.23657 14.8492C7.23657 14.5177 7.36814 14.1998 7.60256 13.9654L8.66322 12.9047Z" stroke="white"/>
            </g>
          </g>
          <defs>
            <filter id="filter0_d_ascii" x="4.73828" y="5.23523" width="24.4688" height="24.4706" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
              <feFlood floodOpacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="0.5"/>
              <feGaussianBlur stdDeviation="1"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
            </filter>
            <clipPath id="clip0_ascii">
              <rect width="24" height="24" fill="white" transform="translate(0 16.9706) rotate(-45)"/>
            </clipPath>
          </defs>
        </svg>
      )}
      {tool === 'erase' && (
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clipPath="url(#clip0_eraser)">
            <g filter="url(#filter0_d_eraser)">
              <path d="M21.0926 16.4625L17.2113 20.3437C16.7893 20.7657 16.2171 21.0027 15.6204 21.0027C15.0237 21.0027 14.4514 20.7657 14.0294 20.3437L2.90505 9.21935C2.48313 8.7974 2.24609 8.22513 2.24609 7.62842C2.24609 7.0317 2.48313 6.45943 2.90505 6.03748C3.40981 5.53272 4.39568 4.57562 5.11288 3.88178C5.66142 3.3511 6.39237 3.05122 7.15553 3.0417L9.38555 3.01388C10.1045 3.00491 10.8025 3.25475 11.3541 3.71589C11.8542 4.1339 12.3758 4.56737 12.3082 4.49998C8.87256 1.07604 21.0926 13.2806 21.0926 13.2806C21.5145 13.7026 21.7515 14.2748 21.7515 14.8715C21.7515 15.4683 21.5145 16.0405 21.0926 16.4625Z" fill="white"/>
              <path d="M21.0926 16.4625L17.2113 20.3437C16.7893 20.7657 16.2171 21.0027 15.6204 21.0027C15.0237 21.0027 14.4514 20.7657 14.0294 20.3437L2.90505 9.21935C2.48313 8.7974 2.24609 8.22513 2.24609 7.62842C2.24609 7.0317 2.48313 6.45943 2.90505 6.03748C3.40981 5.53272 4.39568 4.57562 5.11288 3.88178C5.66142 3.3511 6.39237 3.05122 7.15553 3.0417L9.38555 3.01388C10.1045 3.00491 10.8025 3.25475 11.3541 3.71589C11.8542 4.1339 12.3758 4.56737 12.3082 4.49998C8.87256 1.07604 21.0926 13.2806 21.0926 13.2806C21.5145 13.7026 21.7515 14.2748 21.7515 14.8715C21.7515 15.4683 21.5145 16.0405 21.0926 16.4625Z" fill="#FEBED4"/>
              <path d="M15.6201 21.5027C16.3494 21.5027 17.0487 21.2127 17.5645 20.697L21.4463 16.8162C21.9619 16.3005 22.2519 15.601 22.252 14.8718C22.252 14.1427 21.9618 13.4432 21.4463 12.9275L21.0928 13.281L21.4453 12.9265C21.4449 12.9261 21.4441 12.9253 21.4434 12.9246C21.4419 12.9231 21.4403 12.9205 21.4375 12.9177C21.4317 12.9119 21.4225 12.9037 21.4111 12.8923L20.9277 12.4089C20.6003 12.0819 20.1358 11.6183 19.5898 11.073C18.498 9.98242 17.0782 8.56405 15.7656 7.25269C14.5242 6.01241 13.3782 4.8683 12.6973 4.18726C12.6947 4.1841 12.6936 4.18091 12.6924 4.17944C12.6786 4.16335 12.6658 4.15085 12.6611 4.14624C12.4464 3.93222 12.2928 3.77831 12.1934 3.67944C12.1439 3.6303 12.1076 3.59447 12.084 3.57104C12.0723 3.55943 12.0629 3.54982 12.0566 3.5437C12.0539 3.54106 12.0501 3.53801 12.0469 3.53491C12.046 3.53405 12.0442 3.53217 12.043 3.53101C12.0411 3.52926 12.0357 3.52439 12.0322 3.52124C12.0251 3.51504 11.9221 3.46269 11.7891 3.42847C11.7509 3.39663 11.713 3.36371 11.6748 3.33179C11.0321 2.79466 10.2178 2.50394 9.37891 2.5144L7.14941 2.54175C6.25932 2.55285 5.40619 2.90267 4.76562 3.52222C4.04923 4.21529 3.06002 5.17606 2.55176 5.68433C2.03611 6.20004 1.74609 6.89938 1.74609 7.62866C1.74616 8.35789 2.03613 9.05734 2.55176 9.573L13.6758 20.697C14.1914 21.2126 14.8909 21.5026 15.6201 21.5027Z" stroke="white"/>
            </g>
            <path d="M21.0926 16.4625L17.2113 20.3437C16.7893 20.7657 16.2171 21.0027 15.6204 21.0027C15.0237 21.0027 14.4514 20.7657 14.0294 20.3437L2.90505 9.21935C2.48313 8.7974 2.24609 8.22513 2.24609 7.62842C2.24609 7.0317 2.48313 6.45943 2.90505 6.03748C3.40981 5.53272 4.39568 4.57562 5.11288 3.88178C5.66142 3.3511 6.39237 3.05122 7.15553 3.0417L9.38555 3.01388C10.1045 3.00491 10.8025 3.25475 11.3541 3.71589C11.8542 4.1339 12.3758 4.56737 12.3082 4.49998C8.87256 1.07604 21.0926 13.2806 21.0926 13.2806C21.5145 13.7026 21.7515 14.2748 21.7515 14.8715C21.7515 15.4683 21.5145 16.0405 21.0926 16.4625ZM10.7733 5.08536C10.3982 4.71053 9.88969 4.49998 9.35946 4.49998H7.39442C6.86398 4.49998 6.35527 4.71069 5.9802 5.08577L3.96724 7.09873C3.82669 7.23937 3.74774 7.43006 3.74774 7.62889C3.74774 7.82771 3.82669 8.0184 3.96724 8.15904L6.87748 11.0683L11.8172 6.12866L10.7733 5.08536ZM20.0313 14.3437L12.8775 7.18897L7.93779 12.1287L15.0926 19.2806C15.1622 19.3503 15.2449 19.4057 15.336 19.4434C15.427 19.4811 15.5246 19.5006 15.6232 19.5006C15.7217 19.5006 15.8193 19.4811 15.9104 19.4434C16.0014 19.4057 16.0841 19.3503 16.1538 19.2806L20.0332 15.4012C20.1737 15.2606 20.2527 15.0699 20.2527 14.8711C20.2527 14.6722 20.1737 14.4816 20.0332 14.3409L20.0313 14.3437Z" fill="black"/>
          </g>
          <defs>
            <filter id="filter0_d_eraser" x="-0.753906" y="0.513672" width="25.5039" height="23.989" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
              <feFlood floodOpacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="0.5"/>
              <feGaussianBlur stdDeviation="1"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
            </filter>
            <clipPath id="clip0_eraser">
              <rect width="24" height="24" fill="white" transform="matrix(1 0 0 -1 0 24)"/>
            </clipPath>
          </defs>
        </svg>
      )}
      {tool === 'comment' && (
        <CommentCursor color={strokeColor} />
      )}
    </div>
  );
}
